برای انجام این کار کافی است که یک متغیر static برای کل filesystem در نظر بگیریم که نشان می‌دهد که آیا mount شده است یا خیر. هنگام mount شدن آن را برابر ۱ قرار می‌دهیم و هنگام umount شدن آن را صفر می‌کنیم. حال فقط کافی است که قبل از انجام عملیات block_read و block_write در تابع fs_read و fs_write، چک کنیم که فایل سیستم umount شده یا نه. 

اما در این صورت ممکن است یک critical race پیش بیاید یعنی تابع fs_umount متغیر را صفر کند ولی همزمان تابع fs_write مقدار یک را بخواند. برای برطرف کردن این مشکل از یک سمافور(lock) همراه این متغیر استفاده می‌کنیم که خواندن و نوشتن از این متغیر را atomic کند.

